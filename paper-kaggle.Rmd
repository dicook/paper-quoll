---
title: Kaggle-in-class Data Challenges can Boost Student Learning

# to produce blinded version set to 1
blinded: 0

authors: 
  - name: Julia Polak
    affiliation: Department of Statistics, University of Melbourne
  - name: Dianne Cook
    affiliation: Department of Econometrics and Business Statistics, Monash University

keywords:
- instructional technology
- statistical modeling
- data science
- statistics education
- data mining

abstract: |
  Kaggle is a data modeling competition service, where participants compete to build a model with lower predictive error than other participants. Several years ago they released a reduced service that enables instructors to run competitions in a classroom setting. This paper describes the results of an experiment to determine if the participating in a predictive modeling competition enhances learning. The evidence suggests it does. In addition, students were surveyed to examine if the competition improved engagement and interest in the class.

bibliography: bibliography.bib
output: rticles::asa_article
---

```{r cache=FALSE, echo=FALSE, message=FALSE, warning=FALSE, results='asis'}
#packages:
library(bookdown)
library(knitcitations)
library(RefManageR)
library("tidyverse")
#library("ggpubr")
library("readxl")
library("gridExtra")


knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE, kfigr.link=TRUE, kfigr.prefix=TRUE, cache=TRUE, fig.env = TRUE, fig.cap=TRUE, fig.height=3)

options("citation_format" = "pandoc")

BibOptions(check.entries = FALSE, style = "markdown", bib.style = "alphabetic", cite.style = 'alphabetic')
```

# Introduction

Kaggle is well-known for the richly funded data competitinns, where participants compete to score the lowest error in their model fitting. Recently, they have made it possible to run in-class competitions, private and limited to members of a university course. This work explores how student participation in these challenges improves performance, engagement, interest

@Campbell02 @Schubert13 [@Chi81]


# Experimental setup

## Data collection

Explain experimental design: two compeitions, two locations, two courses, one with students randomised into two groups, the other with control group of students and regression challenge, and exam questions. (Not sure how to incorporate ETC3250 students at the moment.)

## Participants

-	To examine different type of students (undergraduate vs post graduate) and different learning environments (different university) the study run across three different subjects and two universities, Monash University (ETC3250 and ETC5242) and University of Melbourne (MAST90083 subject). 

-	Time period: semester two 2017

-	MAST90083: 

63 enrolled students; postgraduate level; background: math & stats, IT and actuarial science;  

Students were randomly assigned to one of two groups, regression (R) or classification (C). Each group will have a data competition designed for that topic, made available through kaggle in class (https://inclass.kaggle.com). Students wored individually to build predictive models, and submit predictions for the first 16 days. On the 16^{th} day of the competition students received an email that they allowed to establish groups and continue the competition as a group. The competition was continued for additional 7 days. In case they chose to form a group, the final score of the group in total was accounted as their individual mark towards the final grade for the subject and analysed in this project.  Only 3 groups were formed, two groups with 3 students and one group with two students. All other students chose to continue the competition individually.  

Note that the data competition was compulsory to all the students. The volunteering part was the questionnaire at the end of the semester asking for feedback on aspects of the class such as their competition experience, their favourite topic of the semester, and their enjoyment of the material in the subject.



-	ETC5242

-	ETC3250

## Competitions




## Used Platform

Kaggle in class (https://inclass.kaggle.com)... 


# Methodology












# Results

## Performance

### MAST90083

We have examined two normalizations. Once, we normalized the score for the question (or group of questions) by the maximum possible score for the question (or the group of questions), denoted as $PTQ$. We also normalized by the total exam score, denoted as $PTE$. 
The $PTQ$ and the $PTE$ scores were calculated for each student for the following four clusters of questions

- Questions related to classification methods

- Questions related to regression methods

- Questions related to the classification and regression methods

- Questions related to other topics that covered during the subject but unrelated to the data competition

In addition, the $PTQ$ and the $PTE$ scores were calculated to each of the questions in the first and the second clasters.

```{r}
# read Unimelb data
UniMelbData <- read.csv(file="data/UniMeldUnIndef.csv", header=TRUE, sep=",")
```

```{r PtqPteBpGroup, echo = FALSE, fig.cap = "\\label{fig:PtqPteBpGroup} PTQ and PTE scores distributions over different question groups", fig.width=6.5, fig.height=8}
## Groups points questions / total posible points for the questions
g_ptq_class <- ggplot(UniMelbData, aes(Proj_alloc, ptq_class)) + geom_boxplot() + 
                xlab("Project allocation") + ylab("")
g_ptq_reg <- ggplot(UniMelbData, aes(Proj_alloc, ptq_reg)) + geom_boxplot() + 
                xlab("Project allocation") + ylab("")
g_ptq_class_reg <- ggplot(UniMelbData, aes(Proj_alloc, ptq_class_reg)) + geom_boxplot() + 
                    xlab("Project allocation") + ylab("")
g_ptq_noncompq <- ggplot(UniMelbData, aes(Proj_alloc, ptq_noncompq)) + geom_boxplot() + 
                    xlab("Project allocation") + ylab("")
                    

g_pte_class <- ggplot(UniMelbData, aes(Proj_alloc, pte_class)) + geom_boxplot() + 
                xlab("Project allocation") + ylab("")
g_pte_reg <- ggplot(UniMelbData, aes(Proj_alloc, pte_reg)) + geom_boxplot() + 
                xlab("Project allocation") + ylab("")
g_pte_class_reg <- ggplot(UniMelbData, aes(Proj_alloc, pte_class_reg)) + geom_boxplot() + 
                xlab("Project allocation") + ylab("")
g_pte_noncompq <- ggplot(UniMelbData, aes(Proj_alloc, pte_noncompq)) + geom_boxplot() + 
                xlab("Project allocation") + ylab("")


pl <- list(g_ptq_class, g_ptq_reg, g_ptq_class_reg,  g_ptq_noncompq,
           g_pte_class, g_pte_reg, g_pte_class_reg , g_pte_noncompq )

# Create row and column titles
col.titles = c("PTQ", "PTE")
row.titles = c( "Classification", "Regression", "Class & Reg", "Other")

# Add row titles
pl[1:4] = lapply(1:4, function(i) arrangeGrob(pl[[i]], left=row.titles[i]))

# Add column titles and lay out plots
grid.arrange(grobs=lapply(c(1,5), function(i) {
  arrangeGrob(grobs=pl[i:(i+3)], top=col.titles[i/4 + 1], ncol=1)
}), ncol=2)
```

Figure \ref{fig:PtqPteBpGroup} shows the boxplots for the $PTQ$ scores and the $PTE$ scores for each group of students. The left boxplot is related to the students that took part in the data competition related to the regression methods, the Melbourne Price competition. The right boxplot is related to the students that took part in the data competition related to the calssification methods, the Spam classification competition.

The plots in the left column summarize the $PTQ$ scores and the plots in the right column summarize the $PTE$ scores. The four questions clusters are corresponding to the four rows in the figure.

Examining the figure, we can see clearly the positive correlation between student’s scores and the type of the data competition.  Namely, the median score ($PTQ$ and $PTE$) of the students that took part in the regression related competition is higher for regression questions. Similarly, for the students that took part in the classification related competitions. There is no significant different in the medians of the two groups of students for the question related to the general question covered both the classification and the regression methods. As well as for the all other question related to other topics covered during the subject.

The statistical significance of this results was examined via the “permutation tests” …[TO COMPLETE].

```{r permutation_function}

perm_t_test <- function(x, n){ # x- table: 1col proj_alloc, 2col perf (relevant score)
  # Original data
  mean_reg   <- mean(x$perf[x$proj_alloc=="Melbourne Price"])
  mean_class <- mean(x$perf[x$proj_alloc=="Spam classification"])
  dif        <- mean(x$perf[x$proj_alloc=="Melbourne Price"]-
                  mean(x$perf[x$proj_alloc=="Spam classification"]))
  
  # permutation t-test
  pdif <- NULL
  for (i in 1:n) {
  x <- x %>% mutate(proj_alloc = sample(proj_alloc))
  pdif <- c(pdif,
            mean(x$perf[x$proj_alloc=="Melbourne Price"]-
                   mean(x$perf[x$proj_alloc=="Spam classification"])))
  }
  pv_perm <- length(pdif[pdif >= dif])/n
  
  # conventional t-test
  pv_ttest <- t.test(x$perf[x$proj_alloc=="Melbourne Price"], 
                     x$perf[x$proj_alloc=="Spam classification"], 
                     alternative="greater")$p.value
    
    
  return(list("mean_reg"= mean_reg, "mean_class"= mean_class, "dif" = dif, "pv_perm" = pv_perm, "pv_ttest" = pv_ttest))
}  
```


```{r permutation_function , echo = FALSE}
num_permutations = 1000
set.seed(123456)# fix seed


#PTQ
x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = ptq_class)
perm_t_test_ptq_class <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = ptq_reg)
perm_t_test_ptq_reg <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = ptq_class_reg)
perm_t_test_ptq_class_reg <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = ptq_noncompq)
perm_t_test_ptq_noncompq <- perm_t_test(x = x, n = num_permutations)

### PTE
x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = pte_class)
perm_t_test_pte_class <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = pte_reg)
perm_t_test_pte_reg <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = pte_class_reg)
perm_t_test_pte_class_reg <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = pte_noncompq)
perm_t_test_pte_noncompq <- perm_t_test(x = x, n = num_permutations)

## preper a table

tt <- cbind(
t( cbind(perm_t_test_ptq_class , perm_t_test_ptq_reg , perm_t_test_ptq_class_reg , perm_t_test_ptq_noncompq)),

c("","","",""),

t( cbind(perm_t_test_pte_class , perm_t_test_pte_reg , perm_t_test_pte_class_reg , perm_t_test_pte_noncompq))
)
tt <- rbind( c("PTQ" , "PTQ" , "PTQ", "PTQ" , "PTQ" ,"" , "PTE", "PTE", "PTE", "PTE", "PTE") , tt)
tt <- rbind(c("Mean MelbP", "Mean Spam" , "Diff", "P.v. Perm", "P.v. t-test" , "",
                  "Mean MelbP", "Mean Spam" , "Diff", "P.v. Perm", "P.v. t-test"), tt)

tt <- cbind( c("", "" , "Classification", "Regression", "Class & Reg", "Other"), tt)
data.frame(tt)

```

Next we examined the statistical significance of the mean differences between the performances of the two group of students. 

`r print(tt, digits = 2)`





**Examining individual questions**

In the final exam two questions were related to the classification methods (Q1 and Q10) and five questions were related to regression methods (Q5, Q6, Q8, Q15 and Q16). 


```{r PtqPteBpClass, echo = FALSE, fig.cap = "\\label{fig:PtqPteBpClass} PTQ and PTE scores distributions for classification questions" , fig.width=6.5, fig.height=3.7}

# Classification: Q1 & Q10 
UniMelbData$ptq_class_Q1 <- as.factor(UniMelbData$ptq_class_Q1)
g_ptq_class_Q1 <- ggplot(UniMelbData, aes( ptq_class_Q1)) + geom_bar() + 
  facet_grid( .  ~ Proj_alloc)  + xlab("") + ylab("Num. of Students")
g_ptq_class_Q10 <- ggplot(UniMelbData, aes(Proj_alloc, ptq_class_Q10)) + 
  geom_boxplot() + xlab("Project allocation") + ylab("")
g_pte_class_Q1 <- ggplot(UniMelbData, aes(Proj_alloc, pte_class_Q1)) + 
  geom_boxplot() + xlab("Project allocation") + ylab("")
g_pte_class_Q10 <- ggplot(UniMelbData, aes(Proj_alloc, pte_class_Q10)) + 
  geom_boxplot() + xlab("Project allocation") + ylab("")


pl <- list(g_ptq_class_Q1, g_ptq_class_Q10,
           g_pte_class_Q1, g_pte_class_Q10 )


# Create row and column titles
col.titles = c("PTQ", "PTE")
row.titles = c("Q1", "Q2" )

# Add row titles
pl[1:2] = lapply(1:2, function(i) arrangeGrob(pl[[i]], left=row.titles[i]))

# Add column titles and lay out plots
grid.arrange(grobs=lapply(c(1,3), function(i) {
  arrangeGrob(grobs=pl[i:(i+1)], top=col.titles[i/2 + 1], ncol=1)
}), ncol=2)


```


Figure \ref{fig:PtqPteBpClass} shows the scores distribution for the classification methods questions: Q1 and Q10.
  
Q1 was a multi-chose question, worth only 2 points (out of 100). Both plots, of the $PTQ$ and the $PTE$ scores show no difference between the two groups of students.

Q10, was a relatedly large question, worth 10 points. Examining the medians of the $PTQ$ scores indicate only mild advantage for the students from the classification competition. However, looking on the $PTE$ scores suggests that the classification questions was much easier for the students from the classification competition comparing to all the other questions in the exam.


```{r permutation_class_questions , echo = FALSE}

set.seed(123456)# fix seed


#PTQ
# x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = ptq_class_Q1) # 0,1 question
# perm_t_test_ptq_class_Q1 <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = ptq_class_Q10)
perm_t_test_ptq_class_Q10 <- perm_t_test(x = x, n = num_permutations)

#PTE
# x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = pte_class_Q1)
# perm_t_test_pte_class_Q1 <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = pte_class_Q10)
perm_t_test_pte_class_Q10 <- perm_t_test(x = x, n = num_permutations)

## preper a table

tt <- cbind(
t(  perm_t_test_ptq_class_Q10),

c(""),

t( perm_t_test_pte_class_Q10 )
)

tt <- rbind( c("PTQ" , "PTQ" , "PTQ", "PTQ" , "PTQ" ,"" , "PTE", "PTE", "PTE", "PTE", "PTE") , tt)
tt <- rbind(c("Mean MelbP", "Mean Spam" , "Diff", "P.v. Perm", "P.v. t-test" , "",
                  "Mean MelbP", "Mean Spam" , "Diff", "P.v. Perm", "P.v. t-test"), tt)

tt <- cbind( c("", "", "Q10"), tt)
data.frame(tt)

```

Next we examined the statistical significance of the mean differences between the performances of the two group of students for Q10. 

`r print(tt, digits = 2)`



```{r PtqPteBpReg, echo = FALSE, fig.cap = "\\label{fig:PtqPteBpReg} PTQ and PTE scores distributions for regression questions", fig.width=6.5, fig.height=8}



## Groups points questions / total posible points for the questions
# Regression: Q5, Q6, Q8, Q15, Q16
UniMelbData$ptq_reg_Q5 <- as.factor(UniMelbData$ptq_reg_Q5)
g_ptq_reg_Q5 <- ggplot(UniMelbData, aes( ptq_reg_Q5)) + geom_bar() + 
  facet_grid( .  ~ Proj_alloc) + xlab("") + ylab("Num. of Students")
g_ptq_reg_Q6 <- ggplot(UniMelbData, aes(Proj_alloc, ptq_reg_Q6)) + geom_boxplot() + 
  xlab("Project allocation") + ylab("")
g_ptq_reg_Q8  <- ggplot(UniMelbData, aes(Proj_alloc, ptq_reg_Q8)) + geom_boxplot() + 
  xlab("Project allocation") + ylab("")
g_ptq_reg_Q15 <- ggplot(UniMelbData, aes(Proj_alloc, ptq_reg_Q15)) + geom_boxplot() + 
  xlab("Project allocation") + ylab("")
g_ptq_reg_Q16 <- ggplot(UniMelbData, aes(Proj_alloc, ptq_reg_Q16)) + geom_boxplot() + 
  xlab("Project allocation") + ylab("")

g_pte_reg_Q5 <- ggplot(UniMelbData, aes(Proj_alloc, pte_reg_Q5)) + geom_boxplot() + 
  xlab("Project allocation") + ylab("")
g_pte_reg_Q6 <- ggplot(UniMelbData, aes(Proj_alloc, pte_reg_Q6)) + geom_boxplot() + 
  xlab("Project allocation") + ylab("")
g_pte_reg_Q8  <- ggplot(UniMelbData, aes(Proj_alloc, pte_reg_Q8)) + geom_boxplot()+ 
  xlab("Project allocation") + ylab("")
g_pte_reg_Q15 <- ggplot(UniMelbData, aes(Proj_alloc, pte_reg_Q15)) + geom_boxplot() + 
  xlab("Project allocation") + ylab("")
g_pte_reg_Q16 <- ggplot(UniMelbData, aes(Proj_alloc, pte_reg_Q16)) + geom_boxplot() + 
  xlab("Project allocation") + ylab("") 



pl <- list(g_ptq_reg_Q5, g_ptq_reg_Q6, g_ptq_reg_Q8, g_ptq_reg_Q15 , g_ptq_reg_Q16 ,
           g_pte_reg_Q5, g_pte_reg_Q6, g_pte_reg_Q8, g_pte_reg_Q15, g_pte_reg_Q16)

# Create row and column titles
col.titles = c("PTQ", "PTE")
row.titles = c( "Q5", "Q6", "Q8", "Q15" , "Q16")

# Add row titles
pl[1:5] = lapply(1:5, function(i) arrangeGrob(pl[[i]], left=row.titles[i]))

# Add column titles and lay out plots
grid.arrange(grobs=lapply(c(1,6), function(i) {
  arrangeGrob(grobs=pl[i:(i+4)], top=col.titles[i/5 + 1], ncol=1)
}), ncol=2)


```


Figure \ref{fig:PtqPteBpReg} shows the scores distribution for the regression methods questions: Q5, Q6, Q8, Q15 and Q16.
There was no difference in performances of the two groups in the Q5, a small 2 point, question. Interestingly, for question Q6, 6 point question that asked to explain different line of code, the median $PTQ$ scores were similar in the two groups. However, the lower 50 percent of student’s scores was spread over the much lower scores. In fact, the second quartile of the scores of students participated in the classification competition covered the range of the scores of the 50 percent of student’s scores participated the regression competition. This suggest that participation in the competition help the student to remember the R command better. Similar behaviour can be observed in the performances in Q15, and easy 8 point question, dealing with the differences between Lasso and Ridge regressions. 


In the performances in Q8, a 8 point fairly easy question, that dealing with the regression trees, a ‘mirror’ behaviour can be observed. The median $PTQ$ scores were similar in the two groups, however the third quartile of the scores of students participated the regression competition spread in the range of the $3^{rd}$ and the $4^{rd}$ quartile of the students' scores participated the classification competition. 


Finally, looking on the $PTQ$ scores, in the Q16, 4 point question, that required a deep understanding of the GAM method, one of the regression technic, the students participated the regression competition had a clear advantage over their pears participated the classification competition.     



```{r permutation_Reg_questions , echo = FALSE}

set.seed(123456)# fix seed


#PTQ
x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = ptq_reg_Q6)
perm_t_test_ptq_reg_Q6 <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = ptq_reg_Q8)
perm_t_test_ptq_reg_Q8 <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = ptq_reg_Q15)
perm_t_test_ptq_reg_Q15 <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = ptq_reg_Q16)
perm_t_test_ptq_reg_Q16 <- perm_t_test(x = x, n = num_permutations)

### PTE
x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = pte_reg_Q6)
perm_t_test_pte_reg_Q6 <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = pte_reg_Q8)
perm_t_test_pte_reg_Q8 <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = pte_reg_Q15)
perm_t_test_pte_reg_Q15 <- perm_t_test(x = x, n = num_permutations)

x <-  UniMelbData %>% select( proj_alloc = Proj_alloc, perf = pte_reg_Q16)
perm_t_test_pte_reg_Q16 <- perm_t_test(x = x, n = num_permutations)

## preper a table

tt <- cbind(
t( cbind(perm_t_test_ptq_reg_Q6 , perm_t_test_ptq_reg_Q8, perm_t_test_ptq_reg_Q15 , perm_t_test_ptq_reg_Q16)),

c("","","",""),

t( cbind(perm_t_test_pte_reg_Q6 , perm_t_test_pte_reg_Q8 , perm_t_test_pte_reg_Q15 , perm_t_test_pte_reg_Q16))
)
tt <- rbind( c("PTQ" , "PTQ" , "PTQ", "PTQ" , "PTQ" ,"" , "PTE", "PTE", "PTE", "PTE", "PTE") , tt)
tt <- rbind(c("Mean MelbP", "Mean Spam" , "Diff", "P.v. Perm", "P.v. t-test" , "",
                  "Mean MelbP", "Mean Spam" , "Diff", "P.v. Perm", "P.v. t-test"), tt)

tt <- cbind( c("", "" , "Q6", "Q8", "Q15", "Q16"), tt)
data.frame(tt)

```




Next we examined the statistical significance of the mean differences between the performances of the two group of students for Q6, Q8, Q15 and Q16. 

`r print(tt, digits = 2)`


Examining all the remind exam questions weren’t arise any different between the two groups of students.

### Monash students

Figure \ref{fig:ETC5242} shows the results for students in the Statistical Thinking course at Monash University. Only the post-graduate students participated in the regression competition, as their additional assessment requirement. Scores for the question on regression in the final exam were compared with the total exam score (PTE defined earlier). The boxplots suggest that the students who participated in the challenge performed realtively better on the regression question than expected given their total exam performance: the median is higher and there is less variability.

```{r ETC5242, fig.cap = "\\label{fig:ETC5242} Performance for regression question relative to total exam score for students who did and didn't do the regression data competition in the Statistical Thinking course at Monash."}
library(tidyverse)

scores_5242 <- read_csv("data/deidentified_scores_5242.csv")
scores_2420 <- read_csv("data/deidentified_scores_2420.csv")
#summary(scores_5242$`7b (8)`)
#summary(scores_2420$`7b (8)`)

scores_5242$`Exam Tot` <- apply(scores_5242[,4:27],1,sum, na.rm=T)
scores_2420$`Exam Tot` <- apply(scores_2420[,4:27],1,sum, na.rm=T)

scores_5242 <- scores_5242 %>% mutate(perf = `7b (8)`/`Exam Tot`)
scores_2420 <- scores_2420 %>% mutate(perf = `7b (8)`/`Exam Tot`)
scores_5242 <- scores_5242 %>% mutate(class="Yes") %>%
  filter(!is.na(perf))
scores_2420 <- scores_2420 %>% mutate(class="No") %>%
  filter(!is.na(perf))

#summary(scores_5242$perf)
#summary(scores_2420$perf)
scores <- bind_rows(scores_5242, scores_2420)
ggplot(scores, aes(x=class, y=perf)) + 
  geom_boxplot() + 
  xlab("Participated in regression competiton") +
  ylab("Score relative to total score")
```

```{r permtest}
pdif <- NULL
for (i in 1:1000) {
  x <- scores %>% select(class, perf)
  x <- x %>% mutate(class = sample(class))
  pdif <- c(pdif,
            mean(x$perf[x$class=="Yes"]-
                   mean(x$perf[x$class=="No"])))
}
dif <- mean(scores$perf[scores$class=="Yes"]-
       mean(scores$perf[scores$class=="No"]))
```
```{r}
tt <- t.test(scores$perf[scores$class=="Yes"], scores$perf[scores$class=="No"], alternative="greater")
```

On average the students who participated in the kaggle challenge scored `r dif` higher than those that didn't, `r mean(scores$perf[scores$class=="Yes"])` in comaprison to `r mean(scores$perf[scores$class=="No"])`. Using a permutation t-test, this corresponds to a significant difference in means, with $p$-value of `r length(pdif[pdif >= dif])/1000`. A conventional $t$-test, yields similar results with a $p$-value of `r tt$p.value`.



## Engagement

To examine the correlation between student’s engagement levels and the performances in the exam we plot the number of submission during the competition versus the performances in the exam, Figure \ref{fig:numsubmition}. Once again we exam the performances based on two normalizations. Once normalizing by the total possible marks for the relevant cluster of questions ($PTQ$) and once normalizing by total exam marks ($PTE$). For the students participated in the Melbourne Price competition is the cluster of regression questions. For the students participated in the Spam Classification competition is the cluster of questions about classification methods. 



```{r numsubmition, echo = FALSE, fig.cap = "\\label{fig:numsubmition} Number of submission vs exam grades" , fig.width=6.5, fig.height=6.5}

# Classification: Q1 & Q10 
gsg <- ggplot(UniMelbData %>% filter(Proj_alloc == "Spam classification"), aes(numsub, ptq_class)) + 
  geom_point() + xlab("Num. of submissions") + ylab("")

gse <- ggplot(UniMelbData %>% filter(Proj_alloc == "Spam classification"), aes(numsub, pte_class)) + 
  geom_point() + xlab("Num. of submissions") + ylab("")

grg <- ggplot(UniMelbData %>% filter(Proj_alloc == "Melbourne Price"), aes(numsub, ptq_reg)) + 
  geom_point() + xlab("Num. of submissions") + ylab("")

gre <- ggplot(UniMelbData %>% filter(Proj_alloc == "Melbourne Price"), aes(numsub, pte_reg)) + 
  geom_point() + xlab("Num. of submissions") + ylab("")


pl <- list(grg, gsg,
           gre, gse )


# Create row and column titles
col.titles = c("Question related to project type (PTQ)", "Total exam score (PTE)")
row.titles = c("MElbPrice", "SPAMclass" )

# Add row titles
pl[1:2] = lapply(1:2, function(i) arrangeGrob(pl[[i]], left=row.titles[i]))

# Add column titles and lay out plots
grid.arrange(grobs=lapply(c(1,3), function(i) {
  arrangeGrob(grobs=pl[i:(i+1)], top=col.titles[i/2 + 1], ncol=1)
}), ncol=2)


```

In Figure \ref{fig:numsubmition} we can clearly see a weak positive correlation between the number of submissions during the data competition and the scores normalized to the total possible marks for the relevant cluster of questions. This suggest that as more engaged the student was with the competition, the question about the methods relevant to her competition were easier to her. There is no correlation between the number of submission and the marks for the relevant cluster of questions normalized by the total exam marks ($PTE$). *BECAUSE … the questions that unrelated to the data competitions (51 points)? students put less effort to learn other material? Harder questions?*


We didn’t found any evidence for correlation between the performances in the competition (final score) and the performances in the exam. This suggest that the single fact of participation improve the students marks in the exam. Not necessarily better students in the competition have grater chances to success in the exam. 



## Interest







# Discussion

# Acknowledgments

This project (title: Effect of Data Competition on Learning Experience) has been approved by the Faculty of Science Human Ethics Advisory Group University of Melbourne (Ethics ID: 1749858.1 on September the 4th, 2017) and by XXX Ethics Advisory Group Monash University (Ethics ID: XXX on XXX, 2017). 




# References




# Stuff to hang onto for now

\section{Verifications}
\label{sec:verify}
This section will be just long enough to illustrate what a full page of
text looks like, for margins and spacing.

@Campbell02 @Schubert13 [@Chi81]

# Appendix

There were two data sets used for competitions, one was a regression problem and the other a classification problem. 

## Melbourne price data set

This data contained records of auction prices for residentia properties in Melbourne. The data was compiled from auction reports collected between Feb 2, 2013 and Dec 17, 2016. 

Auction reports were published weekly by Domain and compiled by Home Price Guide (R) *COMMENT: Found the symbol* in pdf format. To read them into R we used the XXX package *COMMENT: reference to our new package for reading those reports*. The reports contained the following information about the properties sold during the week: full address, number of bedrooms, property type (house, unit/ duplex, townhouse, development site or other residential), sold price, type of sale (sold, sold prior, passed in, no bid, vendor bid, withdrawn prior to auction, sold after auction and N/A - price or highest bid not available) and agent name. We also removed all the records without the price. Over all we had 75,367 sold properties for the data competition.

To enrich this data, to make it more realistic we added several additional features, number of visitors, the average rating given to the property by the visitors, number of car spaces, number of baths, land size and house size.	It is possible that some of this information might have been extracted from other web sites, given that we had the full address of the property, but the time required to research that was too daunting to tackle for the upcoming teaching period. 

## Spam data set




 
